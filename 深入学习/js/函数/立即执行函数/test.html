<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <style>
    
    div{
      width: 200px;height: 200px;background-color: red;
      text-align: center;
      margin: 0 auto;
    }
    span{
      color: aqua;
    }
  </style>
</head>

<body>
  <div>
    <div>
      <span>132</span>
    </div>
  </div>
  <script>
    // function a() {
    //   function b() {
    //     var bbb = 234;
    //     document.write(aaa);
    //   }
    //   var aaa = 123;
    //   return b;
    // }
    // var glob = 100;
    // var demo = a();  //b
    // demo()   //123

    //*******
    // function a() {
    //   var num = 100;
    //   function b() {
    //     num ++;
    //     console.log(num)
    //   }
    //   return b
    // }
    // var demo = a();
    // demo(); //101
    // demo();  //102

    //***************
    //
    //闭包  当内部函数被保存在外部时，将产生闭包。闭包会导致原有作用域链不释放，造成内存泄漏
    // function add() {
    //   var count = 0;
    //   function demo() {
    //     count++;
    //     console.log(count);
    //   }
    //   return demo
    // }
    // var counter = add()
    // counter()   // == demo()            //1
    // counter()  //2
    //*****
    // function test() {
    //   var num = 100;
    //   function a() {
    //     num ++;
    //     console.log(num)
    //   }
    //   function b() {
    //     num --;
    //     console.log(num)
    //   }
    //   return [a,b]
    // }
    // var myArr = test()
    // myArr[0]()  //101
    // myArr[1]()  //100

    //****************
    //立即执行函数
    // (function () {
    //   console.log('dasdas')
    // }())



    //***************闭包
    // function test() {
    //   var arr = []
    //   for (var i = 0; i < 10; i++) {
    //     arr[i] = function () {
    //       document.write(i+' ')
    //     }
    //   }
    //   return arr
    // }
    // // console.log(test())
    // var myArr = test()   //arr
    // for (let j = 0; j < 10; j++) {
    //   myArr[j]()   //arr[j]
    // }

    //上面的解决闭包1.将第一个循环的var改成let
    //2.用闭包解决闭包
    // function test() {
    //   var arr = []
    //   for(var i = 0;i < 10;i++) {
    //     (function (a) {
    //       arr[a] = function () {
    //         console.log(a)
    //       }
    //       // console.log('aaaa')
    //     }(i))
    //   }
    //   return arr
    // }
    // test()
    // var myArr = test()   //myArr == arr
    // for(var j = 0;j < 10;j++) {
    //   myArr[j]()
    // }

    //*****************
    function a() {
      function b() {
        var bbb = 234;
        // document.write(aaa)
      }
      var aaa = 123;
      return b
    }
    var glob = 100; 
    var demo = a();   // == b
    demo();   // == b()
  </script>

</body>

</html>